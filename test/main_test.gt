#include <stdio.h>
#include <string.h>

#include "cspec.h"
#include "cspec_output_header.h"
#include "cspec_output_verbose.h"
#include "cspec_output_unit.h"
#include "util/memory.h"

DEFINE_DESCRIPTION(initial_test)
DEFINE_DESCRIPTION(utility_generic_linked_list)
DEFINE_DESCRIPTION(token_array)
DEFINE_DESCRIPTION(scanner_scanner);
DEFINE_DESCRIPTION(tokens)
DEFINE_DESCRIPTION(gambit_parser);
DEFINE_DESCRIPTION(gambit_parser_expressions);
DEFINE_DESCRIPTION(ast_symbol_table);

int status = 0;

int main(int argc, const char* argv[]) {

  /*
  
    CSpec Lib Section
  
  */


    status += CSpec_Run( DESCRIPTION( initial_test ), CSpec_NewOutputVerbose() );

  /*
  
    Utilities Section
  
  */
    status += CSpec_Run( DESCRIPTION( utility_generic_linked_list ), CSpec_NewOutputVerbose() );

  /*

    Shared Section

  */

  status += CSpec_Run( DESCRIPTION( token_array ), CSpec_NewOutputVerbose() );
  status += CSpec_Run( DESCRIPTION( tokens ), CSpec_NewOutputVerbose() );

  /*

  Scanner

  */

  status += CSpec_Run( DESCRIPTION( scanner_scanner ), CSpec_NewOutputVerbose() );

  /*

  Parser

  */

  status += CSpec_Run(DESCRIPTION(gambit_parser), CSpec_NewOutputVerbose());
  status += CSpec_Run(DESCRIPTION(gambit_parser_expressions), CSpec_NewOutputVerbose());
  status += CSpec_Run(DESCRIPTION(ast_symbol_table), CSpec_NewOutputVerbose());

  print_memory_summary();

  return status;
}
